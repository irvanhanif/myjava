package tugas1;
import java.util.Scanner;
public class kasirrumahmakanan {

    public static int member(){
        int kode = 111220; int c=1;
        Scanner scan = new Scanner (System.in);
        System.out.print("Masukkan kode member : ");
        int code = scan.nextInt();
        if(code==kode){
            return c;
        }else if(code==0){
            return c+1;
        }else{
            System.out.println("anda salah login");
            member();return c;
        }
    }
    public static void menumakanan(int ayamB, int ayamG, int Nila, int Nasi, int teh, int jeruk,int c){
        Scanner scan = new Scanner (System.in);
        int jawab;
        do{
        System.out.println("pilih daftar menu :\n"
                + "1. Makanan dan Minuman\n"
                + "2. Makanan\n"
                + "3. Minuman");
        if(c==1){System.out.println("0. Kembali pembelian");}
        jawab = scan.nextInt();
        if(jawab==1){
            System.out.printf("+--------- Daftar Menu ---------+\n");
            System.out.printf("|Makanan :                      |\n");
            System.out.printf("|1.Ayam Bakar      : Rp. %d  |\n",ayamB);
            System.out.printf("|2.Ayam Goreng     : Rp. %d  |\n",ayamG);
            System.out.printf("|3.Nila Bakar      : Rp. %d  |\n",Nila);
            System.out.printf("|4.Nasi            : Rp. %d   |\n",Nasi);
            System.out.printf("+-------------------------------+\n");
            System.out.printf("|Minuman :                      |\n");
            System.out.printf("|5.Teh (es/panas)  : Rp. %d   |\n",teh);
            System.out.printf("|6.Jeruk (es/panas): Rp. %d   |\n",jeruk);
            System.out.printf("+-------------------------------|\n");            
        }else if(jawab==2){
            System.out.printf("+--------- Daftar Menu ---------+\n");
            System.out.printf("|Makanan :                      |\n");
            System.out.printf("|1.Ayam Bakar      : Rp. %d  |\n",ayamB);
            System.out.printf("|2.Ayam Goreng     : Rp. %d  |\n",ayamG);
            System.out.printf("|3.Nila Bakar      : Rp. %d  |\n",Nila);
            System.out.printf("|4.Nasi            : Rp. %d   |\n",Nasi);
            System.out.printf("+-------------------------------+\n");
        }else if(jawab==3){
            System.out.printf("+--------- Daftar Menu ---------+\n");
            System.out.printf("|Minuman :                      |\n");
            System.out.printf("|5.Teh (es/panas)  : Rp. %d   |\n",teh);
            System.out.printf("|6.Jeruk (es/panas): Rp. %d   |\n",jeruk);
            System.out.printf("+-------------------------------|\n");
        }else if(jawab>3){
            System.out.println("Anda salah input");
        }
        }while(jawab>3);
        System.out.println("Masukkan menu yang ingin dibeli (angka),0 untuk berhenti : ");
        System.out.println("Jika ingin liat menu input angka 11");
    }
    public static int[][] pembelian(){
        Scanner scan = new Scanner (System.in);
        int angka[][]=new int[10][10],c=1,a=0;
        for(int i=0; c!=0&&c<10;i++){
            System.out.print("Masukkan kode makanan/minuman : ");
            angka[i][0]=scan.nextInt();
            if(angka[i][0]==11){
                i--;
                menumakanan(12000,12000,16000,4000,3000,4000,1);
            }else if(angka[i][0]!=0&&angka[i][0]<7){
                System.out.print("Masukkan jumlah pesanan : ");
            angka[i][1]=scan.nextInt();
            c=angka[i][0];
            a++;
            }else if(angka[i][0]==0){
                break;
            }else{
                System.out.println("Anda salah input");
                i--;
            }
        }
        int menu[][]=new int[a][2];
        for(int i=0;i<a;i++){
            menu[i][0]=angka[i][0];
            menu[i][1]=angka[i][1];
        }return angka;
    }
    public static int harga(int kode){
        int harga;
        if(kode==1) return 12000;
        else if(kode==2) return 12000;
        else if(kode==3) return 16000;
        else if(kode==4) return 4000;
        else if(kode==5) return 3000;
        else if(kode==6) return 4000;
        else return 0;
    }
    public static String makmin(int kode){
        int harga;
        if(kode==1) return "Ayam Bakar";
        else if(kode==2) return "Ayam Goreng";
        else if(kode==3) return "Nila Bakar";
        else if(kode==4) return "Nasi";
        else if(kode==5) return "Teh (es/panas)";
        else if(kode==6) return "Jeruk (es/panas)";
        else return "";
    }
    public static double bayar(int[][] jumlah, int diskon){
        int bayar=0;
        for(int i=0;i<10;i++){
            bayar+=harga(jumlah[i][0])*jumlah[i][1];
        }if(diskon==0)return bayar;
        else return bayar/2;
    }
    public static void hasil(int[][] menu,double diskon){
        int makanan=0, minuman=0;int mak=0;int min=0;
        String[] minum=new String[10];
        String[] makan=new String[10];
        int[] jumlahmak=new int[10];
        int[] jumlahmin=new int[10];
        int[] hargamak=new int[10];
        int[] hargamin=new int[10];
        System.out.println("+-------------------- Pembayaran --------------------+");
        for(int i=0;i<10;i++){
            if(menu[i][0]==0){
                break;
            }else if(menu[i][0]<5){
                makanan=1;
                makan[mak]=makmin(menu[i][0]);
                jumlahmak[mak]=menu[i][1];
                hargamak[mak]=harga(menu[i][0]);
                mak++;
            }else if(menu[i][0]>=5){
                minuman=1;
                minum[min]=makmin(menu[i][0]);
                jumlahmin[min]=menu[i][1];
                hargamin[min]=harga(menu[i][0]);
                min++;
            }
        }
        System.out.println("+-------------------+------+------------+------------+");
        System.out.printf("|%19s|%6s|   Harga    |Harga jumlah|%n","","Jumlah");
        System.out.println("+-------------------+------+------------+------------+");
        int angka=1;
        if(makanan==1){
        System.out.println("|Makanan :          |      |            |            |");
        }
        double total=0;
        for(int i=0;i<mak;i++){
            System.out.printf("|%d. %-15s |  %-4d| Rp. %-7d| Rp. %-7d|%n",angka++,makan[i],jumlahmak[i],hargamak[i],jumlahmak[i]*hargamak[i]);
            total+=jumlahmak[i]*hargamak[i];
        }
        if(minuman==1){
        System.out.println("|Minuman :          |      |            |            |");
        }
        for(int i=0;i<min;i++){
            System.out.printf("|%d. %-15s |  %-4d| Rp. %-7d| Rp. %-7d|%n",angka++,minum[i],jumlahmin[i],hargamin[i],jumlahmin[i]*hargamin[i]);
            total+=jumlahmin[i]*hargamin[i];
        }
        System.out.println("+-------------------+------+------------+------------+");
        System.out.printf("|%38s : Rp. %.1f|%n","total",total);
        double total1=0;
        if(diskon!=0){
            total1=total/2;
            System.out.println("|                     Diskon 50%        : Rp. "+total1+"|");
            System.out.println("|                     Total keseluruhan : Rp. "+(total-total1)+"|");
        }
        System.out.println("+----------------------------------------------------+");
    }
    public static void main(String[] args) {
        Scanner scan = new Scanner (System.in);
        int berhasil;int c=0;
        do{
        System.out.print("Apakah anda member atau pengunjung? ");
        String jawab = scan.next();
        berhasil=0;
        if(jawab.equals("member")){
            System.out.println("jika ingin kembali ketik angka 0");
            berhasil=member();
        }
        }while(berhasil==2);
        int ayamB = 12000, ayamG=12000, Nila=16000,Nasi=4000,teh=3000,jeruk=4000;
        menumakanan(ayamB,ayamG,Nila,Nasi,teh,jeruk,c);
        c=1;
        int[][] menu=pembelian();
        System.out.printf("jumlah pembayaran : %.2f\n",bayar(menu, berhasil));
        hasil(menu,berhasil);
    }
    
}
